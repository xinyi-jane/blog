# Decap CMS 配置
# 部署到 GitHub Pages 后，需要使用 GitHub backend

backend:
  name: github
  repo: xinyi-jane/blog  # 你的 GitHub 仓库
  branch: main
  # ⚠️ 重要：部署 OAuth 代理服务后，填入你的 Vercel 应用 URL
  # 例如：base_url: https://blog-cms-oauth.vercel.app
  # 如果还没有部署，先使用占位符，部署后再更新
  base_url: https://blog-cms-oauth.vercel.app
  auth_endpoint: api/auth

# 本地开发模式（用于本地测试，取消注释下面的配置并注释掉上面的 github backend）
# backend:
#   name: proxy
#   proxy_url: http://localhost:8081/api/v1

media_folder: public/images
public_folder: /blog/images

collections:
  - name: "posts"
    label: "文章"
    folder: "src/content/posts"
    create: true
    slug: "{{slug}}"
    fields:
      - { label: "标题", name: "title", widget: "string", required: true }
      - { label: "日期", name: "date", widget: "datetime", required: true }
      - { 
          label: "频道", 
          name: "channel", 
          widget: "select", 
          options: ["life", "work"],
          required: true 
        }
      - { label: "标签", name: "tags", widget: "list", required: false }
      - { label: "描述", name: "description", widget: "string", required: false }
      - { label: "草稿", name: "draft", widget: "boolean", default: false, required: false }
      - { label: "封面图", name: "cover", widget: "image", required: false }
      - { label: "图片集", name: "gallery", widget: "list", fields: [{ label: "图片", name: "image", widget: "image" }], required: false }
      - { label: "正文", name: "body", widget: "markdown", required: true }

  - name: "updates"
    label: "动态"
    folder: "src/content/updates"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - { label: "日期", name: "date", widget: "datetime", required: true }
      - { label: "标题", name: "title", widget: "string", required: false }
      - { label: "图片", name: "images", widget: "list", fields: [{ label: "图片", name: "image", widget: "image" }], required: false }
      - { label: "草稿", name: "draft", widget: "boolean", default: false, required: false }
      - { label: "正文", name: "body", widget: "markdown", required: true }

